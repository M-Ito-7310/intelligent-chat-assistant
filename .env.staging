# Staging Environment Configuration
# Copy this file and rename to .env for staging deployment

# ===================================
# Application Configuration
# ===================================
NODE_ENV=staging
PORT=3000

# Staging frontend URL
FRONTEND_URL=https://staging-your-app.vercel.app

# ===================================
# Database Configuration
# ===================================
# Staging database (separate from production)
DATABASE_URL=postgresql://username:password@staging-db-host:5432/staging_db_name
DB_MAX_CONNECTIONS=10
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=10000
DB_SSL_MODE=require

# ===================================
# Redis Configuration
# ===================================
# Staging Redis instance
REDIS_HOST=staging-redis-host.cache.amazonaws.com
REDIS_PORT=6379
REDIS_PASSWORD=staging-redis-password
REDIS_DB=1
REDIS_TLS=true

# ===================================
# JWT Configuration
# ===================================
# Different secrets for staging
JWT_SECRET=staging-jwt-secret-key-different-from-production
JWT_REFRESH_SECRET=staging-jwt-refresh-secret-key-different-from-production
JWT_EXPIRES_IN=2h
JWT_REFRESH_EXPIRES_IN=14d

# ===================================
# AI Service Configuration
# ===================================
# Use separate API keys for staging if possible
OPENAI_API_KEY=sk-staging-openai-api-key-here
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=2048
OPENAI_TEMPERATURE=0.7

GEMINI_API_KEY=staging-gemini-api-key-here
GEMINI_MODEL=gemini-pro

# ===================================
# Vector Database Configuration
# ===================================
PINECONE_API_KEY=staging-pinecone-api-key-here
PINECONE_ENVIRONMENT=us-west1-gcp
PINECONE_INDEX_NAME=ai-chatbot-staging-vectors

# ===================================
# File Storage Configuration
# ===================================
UPLOAD_DIR=/tmp/staging-uploads
MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES=pdf,txt

# Staging S3 bucket
AWS_ACCESS_KEY_ID=staging-aws-access-key
AWS_SECRET_ACCESS_KEY=staging-aws-secret-key
AWS_REGION=us-west-2
AWS_S3_BUCKET=staging-s3-bucket-name

# ===================================
# Security Configuration
# ===================================
CORS_ORIGIN=https://staging-your-app.vercel.app
CORS_CREDENTIALS=true

# More relaxed rate limits for testing
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX_REQUESTS=200

# ===================================
# Monitoring and Logging
# ===================================
LOG_LEVEL=debug
LOG_FORMAT=json

# Staging monitoring (if using separate instances)
DATADOG_API_KEY=staging-datadog-api-key
SENTRY_DSN=staging-sentry-dsn-url

HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=60000

# ===================================
# Performance Configuration
# ===================================
NODE_MAX_OLD_SPACE_SIZE=1024
REQUEST_TIMEOUT=45000
AI_REQUEST_TIMEOUT=90000

# Shorter cache TTL for testing
CACHE_DEFAULT_TTL=1800
CACHE_SHORT_TTL=300
CACHE_LONG_TTL=7200

# ===================================
# Feature Flags
# ===================================
# All features enabled for staging testing
ENABLE_RAG=true
ENABLE_STREAMING=true
ENABLE_DOCUMENT_UPLOAD=true
ENABLE_WEBSOCKETS=true
ENABLE_ANALYTICS=true
ENABLE_ADMIN_DASHBOARD=true

# Beta features enabled for testing
ENABLE_BETA_FEATURES=true
ENABLE_EXPERIMENTAL_AI=true

# ===================================
# Development/Debug Settings
# ===================================
# More debugging enabled in staging
DEBUG_MODE=true
ENABLE_GRAPHQL_PLAYGROUND=true
ENABLE_API_DOCS=true
ENABLE_REQUEST_LOGGING=true
LOG_SQL_QUERIES=true

# ===================================
# Email Configuration
# ===================================
# Test email settings
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_USER=staging-mailtrap-user
SMTP_PASS=staging-mailtrap-pass

FROM_EMAIL=staging@your-domain.com
ADMIN_EMAIL=staging-admin@your-domain.com

# ===================================
# Analytics and Tracking
# ===================================
# Test analytics
GOOGLE_ANALYTICS_ID=GA-STAGING-XXXX-X
ENABLE_USER_ANALYTICS=true
ANALYTICS_SAMPLE_RATE=1.0

# ===================================
# Backup and Recovery
# ===================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 4 * * *
BACKUP_RETENTION_DAYS=7

# ===================================
# Compliance and Privacy
# ===================================
ENABLE_GDPR_MODE=true
DATA_RETENTION_DAYS=90
ALLOW_DATA_EXPORT=true
ANONYMIZE_LOGS=false
ENCRYPT_USER_DATA=true

# ===================================
# Load Balancing and Scaling
# ===================================
CLUSTER_MODE=false
WORKER_PROCESSES=1
SESSION_AFFINITY=false

# ===================================
# Additional Security
# ===================================
INTERNAL_API_KEY=staging-internal-api-key
WEBHOOK_SECRET=staging-webhook-secret
ENABLE_2FA=false

# ===================================
# Custom Configuration
# ===================================
APP_NAME=AI Chatbot Service (Staging)
APP_VERSION=1.0.0-staging
APP_DESCRIPTION=Staging environment for AI chatbot testing

BRAND_NAME=Your Company (Staging)
BRAND_COLOR=#dc2626
BRAND_LOGO_URL=https://staging-cdn.your-domain.com/logo.png

# ===================================
# Environment Validation
# ===================================
REQUIRED_ENV_VARS=NODE_ENV,DATABASE_URL,JWT_SECRET,OPENAI_API_KEY
VALIDATE_ENV_ON_START=true
CHECK_DATABASE_ON_START=true
CHECK_REDIS_ON_START=true
CHECK_AI_SERVICE_ON_START=true