# Production Environment Configuration
# Copy this file and rename to .env for production deployment

# ===================================
# Application Configuration
# ===================================
NODE_ENV=production
PORT=3000

# Frontend URL (update with your production domain)
FRONTEND_URL=https://your-domain.vercel.app

# ===================================
# Database Configuration
# ===================================
# PostgreSQL with pgvector support (Neon, Supabase, or self-hosted)
DATABASE_URL=postgresql://username:password@hostname:5432/database_name
DB_MAX_CONNECTIONS=20
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=10000

# For SSL connections (recommended for production)
DB_SSL_MODE=require

# ===================================
# Redis Configuration
# ===================================
# Redis for caching and rate limiting
REDIS_HOST=your-redis-host.redis.cache.amazonaws.com
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0
REDIS_TLS=true

# Redis connection pool settings
REDIS_MAX_RETRIES_PER_REQUEST=3
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000

# ===================================
# JWT Configuration
# ===================================
# Generate strong secrets: openssl rand -base64 64
JWT_SECRET=your-very-long-and-secure-jwt-secret-key-here
JWT_REFRESH_SECRET=your-very-long-and-secure-jwt-refresh-secret-key-here

# Token expiration times
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# ===================================
# AI Service Configuration
# ===================================
# OpenAI API
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.7

# Google Gemini API (alternative/fallback)
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_MODEL=gemini-pro

# Hugging Face API (alternative/fallback)
HUGGING_FACE_API_KEY=your-hugging-face-api-key-here

# ===================================
# Vector Database Configuration
# ===================================
# Pinecone (if using external vector DB)
PINECONE_API_KEY=your-pinecone-api-key-here
PINECONE_ENVIRONMENT=us-west1-gcp
PINECONE_INDEX_NAME=ai-chatbot-vectors

# Embedding configuration
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# ===================================
# File Storage Configuration
# ===================================
# Local file storage (for documents)
UPLOAD_DIR=/tmp/uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=pdf,txt,doc,docx

# AWS S3 (if using cloud storage)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-west-2
AWS_S3_BUCKET=your-s3-bucket-name

# ===================================
# Security Configuration
# ===================================
# CORS settings
CORS_ORIGIN=https://your-domain.vercel.app
CORS_CREDENTIALS=true

# Rate limiting
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX_REQUESTS=100

# Password policy
MIN_PASSWORD_LENGTH=8
REQUIRE_UPPERCASE=true
REQUIRE_NUMBERS=true
REQUIRE_SYMBOLS=true

# ===================================
# Monitoring and Logging
# ===================================
# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Structured logging format
LOG_FORMAT=json

# External monitoring services
DATADOG_API_KEY=your-datadog-api-key
NEW_RELIC_LICENSE_KEY=your-new-relic-license-key
SENTRY_DSN=your-sentry-dsn-url

# Health check configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000

# ===================================
# Performance Configuration
# ===================================
# Memory limits
NODE_MAX_OLD_SPACE_SIZE=2048

# Request timeouts
REQUEST_TIMEOUT=30000
AI_REQUEST_TIMEOUT=60000

# Cache TTL (time to live) settings
CACHE_DEFAULT_TTL=3600
CACHE_SHORT_TTL=300
CACHE_LONG_TTL=86400

# ===================================
# Feature Flags
# ===================================
# Enable/disable features
ENABLE_RAG=true
ENABLE_STREAMING=true
ENABLE_DOCUMENT_UPLOAD=true
ENABLE_WEBSOCKETS=true
ENABLE_ANALYTICS=true
ENABLE_ADMIN_DASHBOARD=true

# Beta features
ENABLE_BETA_FEATURES=false
ENABLE_EXPERIMENTAL_AI=false

# ===================================
# Email Configuration (if needed)
# ===================================
# SMTP settings for notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Email templates
FROM_EMAIL=noreply@your-domain.com
ADMIN_EMAIL=admin@your-domain.com

# ===================================
# Analytics and Tracking
# ===================================
# Google Analytics
GOOGLE_ANALYTICS_ID=GA-XXXX-X

# User tracking
ENABLE_USER_ANALYTICS=true
ANALYTICS_SAMPLE_RATE=0.1

# ===================================
# Backup and Recovery
# ===================================
# Database backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# S3 backup location
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_S3_PREFIX=ai-chatbot-backups/

# ===================================
# Development/Debug Settings
# ===================================
# Only enable in development
DEBUG_MODE=false
ENABLE_GRAPHQL_PLAYGROUND=false
ENABLE_API_DOCS=false

# Debugging tools
ENABLE_REQUEST_LOGGING=false
LOG_SQL_QUERIES=false

# ===================================
# Microservices Configuration
# ===================================
# If using microservices architecture
DOCUMENT_SERVICE_URL=https://document-service.your-domain.com
CHAT_SERVICE_URL=https://chat-service.your-domain.com
AUTH_SERVICE_URL=https://auth-service.your-domain.com

# Service discovery
CONSUL_HOST=consul.your-domain.com
CONSUL_PORT=8500

# ===================================
# CDN and Static Assets
# ===================================
# CDN for static files
CDN_URL=https://cdn.your-domain.com
STATIC_FILES_URL=https://static.your-domain.com

# Asset versioning
ASSET_VERSION=v1.0.0

# ===================================
# Compliance and Privacy
# ===================================
# GDPR compliance
ENABLE_GDPR_MODE=true
DATA_RETENTION_DAYS=365
ALLOW_DATA_EXPORT=true

# Privacy settings
ANONYMIZE_LOGS=true
ENCRYPT_USER_DATA=true

# ===================================
# Load Balancing and Scaling
# ===================================
# Cluster configuration
CLUSTER_MODE=true
WORKER_PROCESSES=auto

# Session affinity
SESSION_AFFINITY=true
STICKY_SESSIONS=false

# ===================================
# Additional Security
# ===================================
# API key for internal services
INTERNAL_API_KEY=your-internal-service-api-key

# Webhook secrets
WEBHOOK_SECRET=your-webhook-secret-key

# Two-factor authentication
ENABLE_2FA=false
TOTP_ISSUER=AI-Chatbot

# ===================================
# Custom Configuration
# ===================================
# Application-specific settings
APP_NAME=AI Chatbot Service
APP_VERSION=1.0.0
APP_DESCRIPTION=Intelligent AI-powered chatbot with RAG capabilities

# Branding
BRAND_NAME=Your Company
BRAND_COLOR=#1f2937
BRAND_LOGO_URL=https://cdn.your-domain.com/logo.png

# ===================================
# Environment Validation
# ===================================
# Required environment check
REQUIRED_ENV_VARS=NODE_ENV,DATABASE_URL,JWT_SECRET,OPENAI_API_KEY
VALIDATE_ENV_ON_START=true

# Health checks for external services
CHECK_DATABASE_ON_START=true
CHECK_REDIS_ON_START=true
CHECK_AI_SERVICE_ON_START=true